<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="iOS, UIKit 제스쳐 알아보기 1편 - UIPanGesture" /><meta name="author" content="JohnCoder" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="우리가 스마트폰을 쓸 때 화면을 터치를 하거나, 드래그 혹은 두 손가락으로 사진을 확대하는 동작을 가장 많이 사용하는 것 같다. 이번 포스팅에서는 여러가지 동작 중 화면을 드래그 하는 동작을 받아서 뷰를 동작시키는 것을 알아보자." /><meta property="og:description" content="우리가 스마트폰을 쓸 때 화면을 터치를 하거나, 드래그 혹은 두 손가락으로 사진을 확대하는 동작을 가장 많이 사용하는 것 같다. 이번 포스팅에서는 여러가지 동작 중 화면을 드래그 하는 동작을 받아서 뷰를 동작시키는 것을 알아보자." /><link rel="canonical" href="https://lastloper.github.io/posts/UIPanGesture/" /><meta property="og:url" content="https://lastloper.github.io/posts/UIPanGesture/" /><meta property="og:site_name" content="로퍼즈와 비밀의 방" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-10-26T13:52:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="iOS, UIKit 제스쳐 알아보기 1편 - UIPanGesture" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@JohnCoder" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"JohnCoder"},"dateModified":"2022-11-11T14:33:29+00:00","datePublished":"2022-10-26T13:52:00+00:00","description":"우리가 스마트폰을 쓸 때 화면을 터치를 하거나, 드래그 혹은 두 손가락으로 사진을 확대하는 동작을 가장 많이 사용하는 것 같다. 이번 포스팅에서는 여러가지 동작 중 화면을 드래그 하는 동작을 받아서 뷰를 동작시키는 것을 알아보자.","headline":"iOS, UIKit 제스쳐 알아보기 1편 - UIPanGesture","mainEntityOfPage":{"@type":"WebPage","@id":"https://lastloper.github.io/posts/UIPanGesture/"},"url":"https://lastloper.github.io/posts/UIPanGesture/"}</script><title>iOS, UIKit 제스쳐 알아보기 1편 - UIPanGesture | 로퍼즈와 비밀의 방</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="로퍼즈와 비밀의 방"><meta name="application-name" content="로퍼즈와 비밀의 방"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/images/loperz_logo.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">로퍼즈와 비밀의 방</a></div><div class="site-subtitle font-italic">상상을 현실로 만드는,<br>로퍼즈와 비밀의 방<br>공식 블로그</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>홈</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>아카이브</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>정보</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/github_username" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['loperz.official','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> 홈 </a> </span> <span>iOS, UIKit 제스쳐 알아보기 1편 - UIPanGesture</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 포스트</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> </span> <span id="search-cancel" >취소</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>iOS, UIKit 제스쳐 알아보기 1편 - UIPanGesture</h1><div class="post-meta text-muted"> <span> 게시 <em class="" data-ts="1666792320" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2022-10-26 </em> </span> <span> 업데이트 <em class="" data-ts="1668177209" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2022-11-11 </em> </span><div class="d-flex justify-content-between"> <span> By <em> Loperz And The Chamber Of Secrets </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2027 단어"> <em>11 분</em>읽는 시간</span></div></div></div><div class="post-content"><p>우리가 스마트폰을 쓸 때 화면을 터치를 하거나, 드래그 혹은 두 손가락으로 사진을 확대하는 동작을 가장 많이 사용하는 것 같다. 이번 포스팅에서는 여러가지 동작 중 화면을 드래그 하는 동작을 받아서 뷰를 동작시키는 것을 알아보자.</p><p><img data-src="/post_img/20221026/Gesture.png" alt="Kind of Gesture in UIKit" data-proofer-ignore> <em>제스처의 종류</em> xcode의 스토리보드 상에서 “+” 버튼을 눌러서 gesture를 검색하면 위 사진처럼 앱에서 사용할 수 있는 동작들이 나온다. 나중에 하나씩 다뤄보도록 하고 이번 포스팅에서는 Pan Gesture Reconigzer를 사용해보자.</p><h2 id="uipangesturereconizer"><span class="mr-2">UIPanGestureReconizer</span><a href="#uipangesturereconizer" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>언제나 그렇듯, 개발자의 좋은 자세로 여겨지는 것이 항상 공식 개발 문서를 참고하는 것이다. 공식 문서를 먼저 살펴보면</p><p><strong><em>A continuous gesture recognizer that interprets panning gestures.</em></strong></p><p>패닝 제스쳐를 해석하는 연속적인 제스처 인식기(직역하면 그렇다) 라고 번역이 되는데 여기서 말하는 패닝 동작은 터치 후 드래그 동작을 뜻한다.<br /> (사실 명확하게 뜻이 안나와있어서 여러 다른 분야의 포스팅을 찾아 봤는데 카메라 촬영 기법에도 나오고 포토샵에도 비슷한 용어들 나온다. 포토샵에서는 클릭 후 드래그해서 객체를 움직이는 액션을 뜻한다.)</p><p>어떤 앱에서 스티커를 이용해서 사진을 꾸밀 때 스티커를 터치해서 움직인 다음 원하는 위치에 배치하는 동작(?)으로 생각하면 좋을 것 같고, 그냥 뭔가를 움직이지 않더라도 직선 모션은 다 감지한다.</p><p>그럼, 이 제스쳐가 코드에서 어떻게 작동하는지 한번 알아보자.</p><h2 id="ex1---단순-뷰-이동"><span class="mr-2">EX1 - 단순 뷰 이동!</span><a href="#ex1---단순-뷰-이동" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>화면에 떠있는 이미지 뷰를 이동시키는 간단한 코드 예제를 준비해 보았다. 당연히 이미지 뷰는 화면 외부를 튀어나가면 안되는 것을 전제로 만들었다.</p><p>일단 스토리보드를 연 다음, 중간에 이미지 뷰를 하나 만들어서 원하는 배경색을 넣든 이미지를 넣어서 배치를 해보자. (공돌이들에게 디자인은 너무나 어려운 영역인것…)</p><p><img data-src="/post_img/20221026/UIPanGesture_1.png" alt="Kind of Gesture in UIKit" data-proofer-ignore></p><p>그리고 반드시!! 우측 인스펙터 창에서 “User Interaction Enable” 항목을 반드시 체크해야 한다!</p><p>그 다음, 해당 뷰컨트롤러에 연결되어 있는 ViewContoller.swift에 가서 스토리보드에 추가해 준 이미지뷰 객체를 선언한 다음, viewDidLoad 함수에 다음 코드를 넣어보자.(아래 코드 참조)</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">class</span> <span class="kt">ViewController1</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

    <span class="c1">//추가한 이미지 뷰 객체 선언. 당연히 스토리보드와 연결되어 있어야 함.</span>
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">imageView</span><span class="p">:</span> <span class="kt">UIImageView</span><span class="o">!</span>
    
    <span class="c1">//UIScreen.main.bounds -&gt; 현재 기기의 외곽 사이즈를 CGRect로 반환해줌.</span>
    <span class="k">let</span> <span class="nv">bounds</span><span class="p">:</span> <span class="kt">CGRect</span> <span class="o">=</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
        
        <span class="c1">//난 공돌이이기 떄문에 대강 SF Symbol로 이미지 뷰에 동그라미를 넣어보았다.</span>
        <span class="n">imageView</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="kt">UIImage</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="s">"circle.fill"</span><span class="p">)</span>
        
        <span class="c1">//UIView를 상속하는 객체에 제스쳐 전달. #selector 로 콜백함수 전달</span>
        <span class="k">let</span> <span class="nv">gesture</span> <span class="o">=</span> <span class="kt">UIPanGestureRecognizer</span><span class="p">(</span><span class="nv">target</span><span class="p">:</span> <span class="k">self</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="kd">#selector(</span><span class="nf">dragObject</span><span class="kd">)</span><span class="p">)</span>
        
        <span class="c1">//제스쳐 등록 -&gt; addGestureRecognizer 메서드는 UIView의 메서드이기 때문에 UIView를 상속받는 모든</span>
        <span class="c1">//객체에서 사용 가능하다!</span>
        <span class="n">imageView</span><span class="o">.</span><span class="nf">addGestureRecognizer</span><span class="p">(</span><span class="n">gesture</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="c1">//제스쳐 실행 시 콜백 함수 -&gt; 위 이미지 뷰에서 등록한 제스쳐가 실행될 때 마다 dragObject를 실행시키며, </span>
    <span class="c1">//그 매개변수로 UIPangGestureRecognizer 타입의 sender를 보낸다. </span>
    <span class="kd">@objc</span> <span class="kd">func</span> <span class="nf">dragObject</span><span class="p">(</span><span class="n">_</span> <span class="nv">sender</span><span class="p">:</span> <span class="kt">UIPanGestureRecognizer</span><span class="p">)</span> <span class="p">{</span>
        
        <span class="k">let</span> <span class="nv">location</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="nf">location</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="n">view</span><span class="p">)</span> <span class="c1">//등록한 이미지 뷰의 현재 위치</span>
        <span class="k">let</span> <span class="nv">draggedView</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="n">view</span><span class="o">!</span> <span class="c1">//현재 드래그 하고자 하는 뷰. 즉 이미지 뷰를 뜻한다.</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">imageView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span> 
            <span class="n">draggedView</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">imageView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">width</span>
            <span class="c1">//현재 사람 손의 위치가 스마트폰 좌측에서 이미지 뷰 폭의 1/2구간일 때, </span>
            <span class="c1">//스마트 폰의 좌측으로 튀어나가지 않도록!</span>

        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">bounds</span><span class="o">.</span><span class="n">maxX</span> <span class="o">-</span> <span class="n">imageView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">draggedView</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">bounds</span><span class="o">.</span><span class="n">maxX</span> <span class="o">-</span> <span class="n">imageView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span>
            <span class="c1">//현재 사람 손의 위치가 스마트폰 우측에서 이미지 뷰 폭의 1/2구간일 떄,</span>
            <span class="c1">//스마트 폰의 우측으로 튀어나가지 않도록! (bounds.maxX!)</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">draggedView</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">location</span>
            <span class="c1">//그 외에는 움직이는 뷰의 센터는 현재 손가락의 위치를 그대로 따라간다!</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p><img data-src="/post_img/20221026/ex1.gif" alt="EX1" data-proofer-ignore></p><h2 id="ex2---뷰-방향-인식"><span class="mr-2">EX2 - 뷰 방향 인식!</span><a href="#ex2---뷰-방향-인식" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>이번에는 드래그 하는 방향을 인식하도록 만들어 보았다. 위 예제처럼 똑같이 동작하는 뷰를 만들고, 드래그 방향을 라벨에 띄우도록 만들어 보자.</p><p>위 코드와 비슷한데, 방향을 문자열로 띄우도록 스토리보드에 라벨을 하나 추가하였고, dragObject 콜백 함수에 sender.velocity라는 메서드가 하나 더 생겼다.<br /> 이는, 드래그 방향에 따라 속도를 CGFloat 으로 반환해 준다.</p><p>!! 속도니까 당연히 부호도 있다. +,-로 반환하기 떄문에 어느 방향으로 드래그가 되고있는 지 알 수 있다. 참고로, 기기의 좌측 최상단이 0,0이고, 이를 기준으로 우측으로 가면 +X 방향,아래로 가면 +Y 방향이다. (다 아실거라 믿습니다!)</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">class</span> <span class="kt">ViewController2</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">labelDir</span><span class="p">:</span> <span class="kt">UILabel</span><span class="o">!</span>
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">controlDirView</span><span class="p">:</span> <span class="kt">UIImageView</span><span class="o">!</span>
    
    <span class="k">let</span> <span class="nv">bounds</span><span class="p">:</span> <span class="kt">CGRect</span> <span class="o">=</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span>
    
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
        
        <span class="c1">//방향을 보여줄 라벨!</span>
        <span class="n">labelDir</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">"haha"</span>
        
        <span class="c1">//나머지는 똑같다.</span>
        <span class="k">let</span> <span class="nv">gesture</span> <span class="o">=</span> <span class="kt">UIPanGestureRecognizer</span><span class="p">(</span><span class="nv">target</span><span class="p">:</span> <span class="k">self</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="kd">#selector(</span><span class="nf">dragObject</span><span class="kd">)</span><span class="p">)</span>
        
        <span class="c1">//제스쳐 등록</span>
        <span class="n">controlDirView</span><span class="o">.</span><span class="nf">addGestureRecognizer</span><span class="p">(</span><span class="n">gesture</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="c1">//제스쳐 실행 시 콜백 함수</span>
    <span class="kd">@objc</span> <span class="kd">func</span> <span class="nf">dragObject</span><span class="p">(</span><span class="n">_</span> <span class="nv">sender</span><span class="p">:</span> <span class="kt">UIPanGestureRecognizer</span><span class="p">)</span> <span class="p">{</span>
        
        <span class="k">let</span> <span class="nv">location</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="nf">location</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="n">view</span><span class="p">)</span>
        <span class="k">let</span> <span class="nv">draggedView</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="n">view</span><span class="o">!</span>
        
        <span class="c1">//x방향의 속도를 절대값 처리하여 y속도 절대값 보다 클 때, 분기</span>
        <span class="k">if</span> <span class="nf">abs</span><span class="p">(</span><span class="n">sender</span><span class="o">.</span><span class="nf">velocity</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nf">abs</span><span class="p">(</span><span class="n">sender</span><span class="o">.</span><span class="nf">velocity</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="p">)</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//x방향 속도가 음수 일 때, (좌측 방향 드래그)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">sender</span><span class="o">.</span><span class="nf">velocity</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="p">)</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">labelDir</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">"좌"</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">//그 외</span>
                <span class="n">labelDir</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">"우"</span>
            <span class="p">}</span>
            <span class="c1">//y방향의 속도를 절대값 처리하여 x속도 절대값 보다 클 때, 분기</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nf">abs</span><span class="p">(</span><span class="n">sender</span><span class="o">.</span><span class="nf">velocity</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nf">abs</span><span class="p">(</span><span class="n">sender</span><span class="o">.</span><span class="nf">velocity</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="p">)</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//y방향 속도가 양수 일 때, (아래 방향 드래그)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">sender</span><span class="o">.</span><span class="nf">velocity</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">view</span><span class="p">)</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">labelDir</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">"하"</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">//그 외</span>
                <span class="n">labelDir</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">"상"</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">b</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">controlDirView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">draggedView</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">controlDirView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span>

        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">bounds</span><span class="o">.</span><span class="n">maxX</span> <span class="o">-</span> <span class="n">controlDirView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">draggedView</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">bounds</span><span class="o">.</span><span class="n">maxX</span> <span class="o">-</span> <span class="n">controlDirView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">draggedView</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">location</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p><img data-src="/post_img/20221026/ex2.gif" alt="EX1" data-proofer-ignore></p><p>이렇게 하면 뷰가 이동하는 방향을 상/하/좌/우로 나누어서 라벨에 표시가 된다. <br /> (콜백함수는 뷰를 드래그하여 이동시킬 때 마다 실행되기 때문에 라벨에 표시도 계속해서 업데이트 시킨다!)</p><p>그리고, 2번 예제에서 뷰가 조금 끊겨 보이는 현상이 있는데, 뭔가 다른 셋팅이 필요한 것 같다. <br /> (매끄럽게 처리하는 방법을 계속 찾아보겠다.)</p><h2 id="메일보내기"><span class="mr-2">메일보내기</span><a href="#메일보내기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>포스팅에 잘못된 부분이 있거나 궁금하신 점이 있다면, 왼쪽 사이드 하단 메뉴에서 로퍼즈팀으로 메일을 보내주세요!<br /> 최대한 빠른 시간 내에 회신드릴게요! 감사합니다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/ios/'>iOS</a>, <a href='/categories/util/'>Util</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ios/" class="post-tag no-text-decoration" >ios</a> <a href="/tags/uikit/" class="post-tag no-text-decoration" >UiKit</a> <a href="/tags/gesture/" class="post-tag no-text-decoration" >Gesture</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=iOS%2C+UIKit+%EC%A0%9C%EC%8A%A4%EC%B3%90+%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0+1%ED%8E%B8+-+UIPanGesture+-+%EB%A1%9C%ED%8D%BC%EC%A6%88%EC%99%80+%EB%B9%84%EB%B0%80%EC%9D%98+%EB%B0%A9&url=https%3A%2F%2Flastloper.github.io%2Fposts%2FUIPanGesture%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=iOS%2C+UIKit+%EC%A0%9C%EC%8A%A4%EC%B3%90+%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0+1%ED%8E%B8+-+UIPanGesture+-+%EB%A1%9C%ED%8D%BC%EC%A6%88%EC%99%80+%EB%B9%84%EB%B0%80%EC%9D%98+%EB%B0%A9&u=https%3A%2F%2Flastloper.github.io%2Fposts%2FUIPanGesture%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Flastloper.github.io%2Fposts%2FUIPanGesture%2F&text=iOS%2C+UIKit+%EC%A0%9C%EC%8A%A4%EC%B3%90+%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0+1%ED%8E%B8+-+UIPanGesture+-+%EB%A1%9C%ED%8D%BC%EC%A6%88%EC%99%80+%EB%B9%84%EB%B0%80%EC%9D%98+%EB%B0%A9" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="링크 복사하기" data-title-succeed="링크가 복사되었습니다!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">최근 업데이트</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/about-features-of-swift/">애플의 강력한 프로그래밍 언어, Swift의 특징</a><li><a href="/posts/filter-map-reduce/">Swift 이것만 잘써도 프로! Filter, Map, Reduce에 확실하게 잡기</a><li><a href="/posts/about-git-command/">필요한 Git 명령어 정리</a><li><a href="/posts/permission-of-camera/">iOS앱 카메라 사용 권한 요청 쉽고 깔끔하게 하기</a><li><a href="/posts/understanding-is-and-as/">iOS앱에서 Swift is/as 타입캐스팅 이렇게 쓸 수 있다.</a></ul></div><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ios/">ios</a> <a class="post-tag" href="/tags/swift/">swift</a> <a class="post-tag" href="/tags/guide/">guide</a> <a class="post-tag" href="/tags/grammer/">grammer</a> <a class="post-tag" href="/tags/%EA%B0%9C%EB%85%90/">개념</a> <a class="post-tag" href="/tags/gesture/">Gesture</a> <a class="post-tag" href="/tags/uikit/">UiKit</a> <a class="post-tag" href="/tags/util/">util</a> <a class="post-tag" href="/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/">프로그래밍</a> <a class="post-tag" href="/tags/date/">date</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">바로가기</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>관련된 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/UISwipeGesture/"><div class="card-body"> <em class="small" data-ts="1667575200" data-df="YYYY-MM-DD" > 2022-11-04 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>iOS, UIKit 제스쳐 알아보기 2편 - UISwipeGesture</h3><div class="text-muted small"><p> iOS, UIKit 제스쳐 알아보기 1편 - UIPanGesture http://loperz.com/posts/UIPanGesture/ 이번 포스팅에서는 Swipe 제스쳐에 대해서 알아보도록 하겠다. UISwipeGestureReconizer 모든 포스팅에서 강조하듯, 개발자 문서를 한번 보고 넘어가보자! (진짜 웬만한 해답은 제공되는 개발자 문...</p></div></div></a></div><div class="card"> <a href="/posts/PanVsSwipe/"><div class="card-body"> <em class="small" data-ts="1667786880" data-df="YYYY-MM-DD" > 2022-11-07 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>iOS, UIKit 제스쳐 알아보기 3편 - Pan VS Swipe</h3><div class="text-muted small"><p> iOS, UIKit 제스쳐 알아보기 1편 - UIPanGesture http://loperz.com/posts/UIPanGesture/ iOS, UIKit 제스쳐 알아보기 2편 - UISwipeGesture http://loperz.com/posts/UISwipeGesture/ 제스쳐 1편 포스팅에서 제스처의 종류에 대해서 사진으로만 알아 보았는데...</p></div></div></a></div><div class="card"> <a href="/posts/prefetch-data-source-of-tableview/"><div class="card-body"> <em class="small" data-ts="1666620540" data-df="YYYY-MM-DD" > 2022-10-24 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>iOS 네트워킹으로 많은 데이터를 테이블뷰로 페이징하는 방법</h3><div class="text-muted small"><p> 보통 많은 데이터를 보여주는 방법으로 테이블뷰 또는 컬렉션뷰를 이용하곤 한다. 이번 포스팅에서는 네트워크 통신시 많은 데이터를 보여줄때, 페이지 단위로 보여주고 특정 시점에 다음 페이지에 해당하는 데이터를 재요청하는 방법을 정리했다. prefetchDataSource 프로토콜 애플 도큐먼트에서 말하는 prefetchDataSource의 설명을 보면,...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/prefetch-data-source-of-tableview/" class="btn btn-outline-primary" prompt="이전 글"><p>iOS 네트워킹으로 많은 데이터를 테이블뷰로 페이징하는 방법</p></a> <a href="/posts/UISwipeGesture/" class="btn btn-outline-primary" prompt="다음 글"><p>iOS, UIKit 제스쳐 알아보기 2편 - UISwipeGesture</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">Loperz And The Chamber Of Secrets</a>. <span data-toggle="tooltip" data-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다.">일부 권리 보유</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ios/">ios</a> <a class="post-tag" href="/tags/swift/">swift</a> <a class="post-tag" href="/tags/guide/">guide</a> <a class="post-tag" href="/tags/grammer/">grammer</a> <a class="post-tag" href="/tags/%EA%B0%9C%EB%85%90/">개념</a> <a class="post-tag" href="/tags/gesture/">Gesture</a> <a class="post-tag" href="/tags/uikit/">UiKit</a> <a class="post-tag" href="/tags/util/">util</a> <a class="post-tag" href="/tags/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/">프로그래밍</a> <a class="post-tag" href="/tags/date/">date</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">새 버전의 콘텐츠를 사용할 수 있습니다.</p><button type="button" class="btn btn-primary" aria-label="Update"> 업데이트 </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
